<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
    <title>Pi Swap - Web3 Ecosystem</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/tonweb/dist/tonweb.js"></script>
    <link rel="stylesheet" href="<% options.CSSFile %>">
</head>
<body>
    <!-- Main Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-page="home">
            <img src="https://img.icons8.com/ios/50/home-page.png" class="nav-icon">
            <span>Home</span>
        </div>
        <div class="nav-item" data-page="tasks">
            <img src="https://img.icons8.com/ios/50/task.png" class="nav-icon">
            <span>Tasks</span>
        </div>
        <div class="nav-item" data-page="airdrop">
            <img src="https://img.icons8.com/ios/50/gift.png" class="nav-icon">
            <span>Airdrop</span>
        </div>
        <div class="nav-item" data-page="profile">
            <img src="https://img.icons8.com/ios/50/user.png" class="nav-icon">
            <span>Profile</span>
        </div>
    </nav>

    <!-- Home Screen -->
    <div id="homeScreen" class="screen active">
        <div class="header">
            <div class="wallet-status" id="walletStatus">
                <div class="status-indicator disconnected"></div>
                <span>TON Wallet Not Connected</span>
            </div>
            <div class="balance-card">
                <div class="balance-header">
                    <img src="https://img.icons8.com/ios/50/pi.png" class="balance-icon">
                    <span>Pi Swap Balance</span>
                </div>
                <div class="balance-amount">
                    <span id="piBalance">0</span>
                    <span class="currency-symbol">œÄ</span>
                </div>
                <div class="balance-subtitle" id="nextClaim">Claim available now!</div>
            </div>
        </div>

        <div class="action-buttons">
            <button class="action-btn primary" id="connectWalletBtn">
                <img src="https://img.icons8.com/ios/50/blockchain-technology.png" class="btn-icon">
                <span>Connect TON Wallet</span>
            </button>
            
            <button class="action-btn secondary" id="dailyClaimBtn">
                <img src="https://img.icons8.com/ios/50/coins.png" class="btn-icon">
                <span>Claim 10 œÄ</span>
                <div class="timer-badge" id="claimTimer" style="display:none">24h</div>
            </button>

            <button class="action-btn shop-btn" id="openShopBtn">
                <img src="https://img.icons8.com/ios/50/shop.png" class="btn-icon">
                <span>Buy Pi Swap</span>
            </button>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalEarned">0</div>
                <div class="stat-label">Total Earned</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="tasksCompleted">0</div>
                <div class="stat-label">Tasks Done</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="airdropPoints">0</div>
                <div class="stat-label">Airdrop Points</div>
            </div>
        </div>

        <div class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="action-grid">
                <div class="quick-action" data-action="watchAd">
                    <img src="https://img.icons8.com/ios/50/play.png" class="action-icon">
                    <span>Watch Ad</span>
                </div>
                <div class="quick-action" data-action="invite">
                    <img src="https://img.icons8.com/ios/50/invite.png" class="action-icon">
                    <span>Invite Friends</span>
                </div>
                <div class="quick-action" data-action="kyc">
                    <img src="https://img.icons8.com/ios/50/verified-account.png" class="action-icon">
                    <span>Verify KYC</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Tasks Screen -->
    <div id="tasksScreen" class="screen">
        <div class="screen-header">
            <h2>Daily Tasks</h2>
            <div class="tasks-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="tasksProgress" style="width: 0%"></div>
                </div>
                <span id="tasksCompletedText">0/5 Completed</span>
            </div>
        </div>

        <div class="tasks-list">
            <div class="task-item" data-task="dailyClaim">
                <div class="task-info">
                    <div class="task-icon">üéØ</div>
                    <div class="task-details">
                        <h4>Daily Claim</h4>
                        <p>Claim 10 œÄ every 24 hours</p>
                        <div class="task-reward">+10 œÄ</div>
                    </div>
                </div>
                <div class="task-status">
                    <span class="status-badge completed" id="dailyClaimStatus">Completed</span>
                </div>
            </div>

            <div class="task-item" data-task="watchAd">
                <div class="task-info">
                    <div class="task-icon">üì∫</div>
                    <div class="task-details">
                        <h4>Watch Advertisement</h4>
                        <p>Watch ads every 30 minutes</p>
                        <div class="task-reward">+1 œÄ per ad</div>
                    </div>
                </div>
                <div class="task-status">
                    <button class="task-action-btn" id="watchAdBtn" data-timer="30">
                        <span>Watch Ad</span>
                        <div class="cooldown-timer" style="display:none">30:00</div>
                    </button>
                </div>
            </div>

            <div class="task-item" data-task="joinChannel">
                <div class="task-info">
                    <div class="task-icon">üì¢</div>
                    <div class="task-details">
                        <h4>Join Telegram Channel</h4>
                        <p>Join our official channel</p>
                        <div class="task-reward">+50 œÄ</div>
                    </div>
                </div>
                <div class="task-status">
                    <button class="task-action-btn" id="joinChannelBtn">
                        <span>Join Channel</span>
                    </button>
                </div>
            </div>

            <div class="task-item" data-task="kyc">
                <div class="task-info">
                    <div class="task-icon">‚úÖ</div>
                    <div class="task-details">
                        <h4>Complete KYC Verification</h4>
                        <p>Verify your identity</p>
                        <div class="task-reward">+100 œÄ</div>
                    </div>
                </div>
                <div class="task-status">
                    <button class="task-action-btn" id="kycBtn">
                        <span>Verify</span>
                    </button>
                </div>
            </div>

            <div class="task-item" data-task="invite">
                <div class="task-info">
                    <div class="task-icon">üë•</div>
                    <div class="task-details">
                        <h4>Invite Friends</h4>
                        <p>Invite friends to join Pi Swap</p>
                        <div class="task-reward">+25 œÄ per friend</div>
                    </div>
                </div>
                <div class="task-status">
                    <button class="task-action-btn" id="inviteBtn">
                        <span>Invite</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Airdrop Screen -->
    <div id="airdropScreen" class="screen">
        <div class="screen-header">
            <h2>Airdrop Program</h2>
            <div class="airdrop-info">
                <div class="airdrop-total">
                    <span>Total Points:</span>
                    <span id="airdropTotalPoints">0</span>
                </div>
            </div>
        </div>

        <div class="airdrop-card">
            <div class="airdrop-header">
                <h3>üéÅ Pi Swap Airdrop</h3>
                <div class="airdrop-badge">Active</div>
            </div>
            <div class="airdrop-progress">
                <div class="progress-stats">
                    <span>Your Tier:</span>
                    <span id="airdropTier">Bronze</span>
                </div>
                <div class="progress-bar large">
                    <div class="progress-fill" id="airdropProgress" style="width: 0%"></div>
                </div>
                <div class="progress-labels">
                    <span>Bronze</span>
                    <span>Silver</span>
                    <span>Gold</span>
                </div>
            </div>
        </div>

        <div class="points-breakdown">
            <h4>Points Breakdown</h4>
            <div class="points-list">
                <div class="point-item">
                    <span>Daily Claims</span>
                    <span id="pointsDaily">0 points</span>
                </div>
                <div class="point-item">
                    <span>Tasks Completed</span>
                    <span id="pointsTasks">0 points</span>
                </div>
                <div class="point-item">
                    <span>KYC Verified</span>
                    <span id="pointsKYC">0 points</span>
                </div>
                <div class="point-item">
                    <span>Channel Member</span>
                    <span id="pointsChannel">0 points</span>
                </div>
                <div class="point-item">
                    <span>Referrals</span>
                    <span id="pointsReferrals">0 points</span>
                </div>
            </div>
        </div>

        <div class="verify-section">
            <button class="verify-btn" id="verifyAirdropBtn">
                <span>Verify Eligibility</span>
            </button>
            <p class="verify-note">Verify your wallet to participate in the airdrop</p>
        </div>
    </div>

    <!-- Profile Screen -->
    <div id="profileScreen" class="screen">
        <div class="profile-header">
            <div class="user-avatar-large">
                <img id="profileAvatar" src="" alt="Avatar">
                <div class="premium-badge" id="profilePremiumBadge" style="display:none">‚≠ê</div>
            </div>
            <div class="user-info">
                <h2 id="profileName">User Name</h2>
                <p id="profileUsername">@username</p>
                <div class="user-tier">
                    <span class="tier-badge" id="userTier">Member</span>
                </div>
            </div>
        </div>

        <div class="profile-stats">
            <div class="profile-stat">
                <div class="stat-icon">ü™ô</div>
                <div class="stat-info">
                    <span class="stat-value" id="profilePiBalance">0 œÄ</span>
                    <span class="stat-label">Pi Swap Balance</span>
                </div>
            </div>
            <div class="profile-stat">
                <div class="stat-icon">üìà</div>
                <div class="stat-info">
                    <span class="stat-value" id="profileTotalEarned">0 œÄ</span>
                    <span class="stat-label">Total Earned</span>
                </div>
            </div>
            <div class="profile-stat">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-info">
                    <span class="stat-value" id="profileTasksDone">0</span>
                    <span class="stat-label">Tasks Completed</span>
                </div>
            </div>
        </div>

        <div class="profile-actions">
            <h3>Account Settings</h3>
            <div class="settings-list">
                <div class="setting-item" id="kycSetting">
                    <div class="setting-info">
                        <div class="setting-icon">üÜî</div>
                        <div>
                            <h4>KYC Verification</h4>
                            <p>Verify your identity</p>
                        </div>
                    </div>
                    <div class="setting-status">
                        <span class="status-badge pending" id="kycStatus">Not Verified</span>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-icon">üîó</div>
                        <div>
                            <h4>Wallet Connection</h4>
                            <p>Connect TON wallet</p>
                        </div>
                    </div>
                    <div class="setting-status">
                        <span class="status-badge disconnected" id="walletStatusProfile">Not Connected</span>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-icon">üì¢</div>
                        <div>
                            <h4>Telegram Channel</h4>
                            <p>Join our community</p>
                        </div>
                    </div>
                    <div class="setting-status">
                        <span class="status-badge pending" id="channelStatus">Not Joined</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shop Bottom Sheet -->
    <div id="shopSheet" class="bottom-sheet">
        <div class="sheet-header">
            <h3>Buy Pi Swap Tokens</h3>
            <button class="sheet-close" id="closeShopBtn">√ó</button>
        </div>
        <div class="sheet-content">
            <div class="wallet-info-sheet">
                <div class="wallet-balance">
                    <span>TON Balance:</span>
                    <span id="sheetTonBalance">0 TON</span>
                </div>
                <div class="wallet-address" id="sheetWalletAddress">
                    Not connected
                </div>
            </div>

            <div class="buy-options">
                <div class="buy-option" data-amount="100" data-price="1">
                    <div class="option-header">
                        <span class="option-amount">100 œÄ</span>
                        <span class="option-price">1 TON</span>
                    </div>
                    <div class="option-desc">Starter Pack</div>
                    <button class="buy-btn" data-amount="100">Buy Now</button>
                </div>

                <div class="buy-option featured" data-amount="1000" data-price="10">
                    <div class="option-header">
                        <span class="option-amount">1000 œÄ</span>
                        <span class="option-price">10 TON</span>
                    </div>
                    <div class="option-desc">Best Value</div>
                    <button class="buy-btn" data-amount="1000">Buy Now</button>
                </div>

                <div class="buy-option" data-amount="5000" data-price="45">
                    <div class="option-header">
                        <span class="option-amount">5000 œÄ</span>
                        <span class="option-price">45 TON</span>
                    </div>
                    <div class="option-desc">Whale Package</div>
                    <button class="buy-btn" data-amount="5000">Buy Now</button>
                </div>
            </div>

            <div class="payment-info">
                <div class="info-item">
                    <span>Recipient Wallet:</span>
                    <span class="wallet-address">UQCTZAMbXoN5T43K9gJXH8GYWBmIstXrUrdoV9kv3btN1Ad3</span>
                </div>
                <div class="info-item">
                    <span>Network:</span>
                    <span>TON Mainnet</span>
                </div>
            </div>
        </div>
    </div>

    <!-- KYC Modal -->
    <div id="kycModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>KYC Verification</h3>
                <button class="modal-close" id="closeKycBtn">√ó</button>
            </div>
            <div class="modal-body">
                <div class="kyc-steps">
                    <div class="kyc-step active">
                        <div class="step-number">1</div>
                        <div class="step-info">
                            <h4>Basic Information</h4>
                            <p>Provide your personal details</p>
                        </div>
                    </div>
                    <div class="kyc-step">
                        <div class="step-number">2</div>
                        <div class="step-info">
                            <h4>Document Upload</h4>
                            <p>Upload government ID</p>
                        </div>
                    </div>
                    <div class="kyc-step">
                        <div class="step-number">3</div>
                        <div class="step-info">
                            <h4>Selfie Verification</h4>
                            <p>Take a selfie with your ID</p>
                        </div>
                    </div>
                </div>

                <form class="kyc-form">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="kycName" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="kycEmail" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label>Country</label>
                        <select id="kycCountry">
                            <option value="">Select Country</option>
                            <option value="US">United States</option>
                            <option value="UK">United Kingdom</option>
                            <option value="CA">Canada</option>
                            <!-- Add more countries -->
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelKycBtn">Cancel</button>
                <button class="btn-primary" id="submitKycBtn">Start Verification</button>
            </div>
        </div>
    </div>

    <!-- Coming Soon Modal -->
    <div id="comingSoonModal" class="modal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3>Coming Soon</h3>
            </div>
            <div class="modal-body">
                <div class="coming-soon-content">
                    <div class="soon-icon">üöÄ</div>
                    <p>This feature is under development and will be available soon!</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="closeSoonBtn">OK</button>
            </div>
        </div>
    </div>

    <!-- Transaction Modal -->
    <div id="transactionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Processing Transaction</h3>
            </div>
            <div class="modal-body">
                <div class="transaction-details">
                    <div class="transaction-item">
                        <span>You Pay:</span>
                        <span id="transactionTonAmount">0 TON</span>
                    </div>
                    <div class="transaction-item">
                        <span>You Receive:</span>
                        <span id="transactionPiAmount">0 œÄ</span>
                    </div>
                    <div class="transaction-item">
                        <span>Network Fee:</span>
                        <span>~0.05 TON</span>
                    </div>
                </div>
                <div class="transaction-status" id="transactionStatus">
                    Initializing transaction...
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelTransactionBtn">Cancel</button>
                <button class="btn-primary" id="confirmTransactionBtn">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

<script src="<% options.JSFile %>"></script>
</body>
</html>
